### π¤ νμ›κ°€μ…κ³Ό λΉ„λ°€λ²νΈ μ•”νΈν™”  

![2021-07-23 23 23 43](https://user-images.githubusercontent.com/80666066/126796764-0cfd30a2-8427-425b-9c73-7250a0e889ea.gif)

νμ›κ°€μ… νμ΄μ§€μ—μ„ μ •λ³΄λ¥Ό μ…λ ¥ν•κ³  μ μ¶ν•λ©΄,  
ν•΄λ‹Ή μ •λ³΄λ¥Ό axiosλ΅ μ„λ²„λ‹¨μ— μ „μ†΅ν•λ‹¤  
κ·Έλ¦¬κ³  μ‘λ‹µμ— λ”°λΌ κ°€μ…μ— μ„±κ³µν•λ©΄ λ΅κ·ΈμΈ νμ΄μ§€λ΅ λ¦¬λ‹¤μ΄λ ‰νΈλ¥Ό,  
μ‹¤ν¨ν•λ©΄ μ‹¤ν¨ν–λ‹¤λ” μ•λ¦Όμ„ λ„μ›μ¤€λ‹¤   

<br/>

```javascript
const onSubmitHandler = (event) => {
    event.preventDefault();
    
    if(Password !== ConfirmPassword){
        return alert('λΉ„λ°€λ²νΈκ°€ μΌμΉν•μ§€ μ•μµλ‹λ‹¤')
    }
    
    let body = {
        email: Email,
        name: Name,
        password: Password
    }
    
    dispatch(registerUser(body))
        .then(response => {
            if(response.payload.success){
                props.history.push("/login")
            } else {
                alert("νμ›κ°€μ… μ‹¤ν¨")
            }
        })
}
```

<br/>

```javascript
export function registerUser(dataTosubmit) {
    const request = axios.post('/api/users/register', dataTosubmit)
        .then(response => response.data )
        
    return {
        type: REGISTER_USER,
        payload: request
    }
}
```

<br/>

μ„λ²„λ‹¨μ—μ„λ” ν•΄λ‹Ή λ°μ΄ν„°λ΅ user κ°μ²΄λ¥Ό μƒμ„±ν•΄μ„ mongoDBμ— μ €μ¥ν• λ‹¤μ, μ„±κ³µ μ—¬λ¶€λ¥Ό λ°ν™ν•΄μ¤€λ‹¤ 

<br/>

```javascript
app.post('/api/users/register', (req, res) => {
    // νμ› κ°€μ… ν•  λ• ν•„μ”ν• μ •λ³΄λ“¤μ„ clientμ—μ„ κ°€μ Έμ¤λ©΄ 
    // κ·Έκ²ƒλ“¤μ„ DBμ— λ„£μ–΄μ¤€λ‹¤ 

    const user = new User(req.body)

    user.save((err, userInfo) => {
        if(err) return res.json({sucess: false, err})
        return res.status(200).json({
            success: true
        })
    })
})
```

<br/>

μ΄ λ•, userκ°€ μ €μ¥λκΈ° μ „μ— μ¤ν‚¤λ§μ— μ •μλ λ€λ΅ λΉ„λ°€λ²νΈκ°€ μ•”νΈν™”λλ‹¤  
μ•”νΈν™”λ” bcrypt λΌμ΄λΈλ¬λ¦¬λ¥Ό μ΄μ©ν–λ‹¤ 

<br/>

```javascript
userSchema.pre('save', function(next){
    var user = this;

    //λΉ„λ°€λ²νΈκ°€ λ³€κ²½λμ—μ„ λ•λ§ μ•”νΈν™”
    if(user.isModified('password')) {
        //λΉ„λ°€λ²νΈλ¥Ό μ•”νΈν™” μ‹ν‚¨λ‹¤ 
        bcrypt.genSalt(saltRounds, function(err, salt){
            if(err) return next(err)
    
            bcrypt.hash(user.password, salt, function(err, hash){
                if(err) return next(err)
    
                user.password = hash
                next()
            })
        })
    } else{
        next()
    }

})
```

<br/>

μ‹¤μ λ΅ DBμ— μ•”νΈν™”λ λΉ„λ°€λ²νΈ λ¬Έμμ—΄μ€ μ΄λ° μ‹μΌλ΅ μ €μ¥λκ² λλ‹¤ 

<img width="530" alt="α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2021-07-23 α„‹α…©α„’α…® 11 49 57" src="https://user-images.githubusercontent.com/80666066/126799914-f3864c2e-1e5e-4503-bd75-b30e0693c04b.png">


